# 大家共治总后台管理系统功能需求文档

## 核心功能页面

### 1. 授权中心页面

#### 1.1 小区管理

**1.1.1 小区列表**
**显示字段**: 
- 小区名称
- 小区地址
- 市场负责人
- 当前授权等级
- 小区人数
- 注册时间
- 授权到期时间
- 状态（停用、正常）
- 操作（编辑、授权续期、查看续期记录）

**1.1.2 筛选功能**
支持根据显示字段进行筛选：
- 小区名称
- 小区地址
- 市场负责人
- 当前授权等级
- 授权到期时间
- 状态（停用、正常）

**1.1.3 翻页功能**
- 分页条数调整
- 上一页/下一页调整
- 指定分页跳转

**1.1.4 新增小区**
创建新的小区
**录入字段**：
- 小区名称
- 小区地址
- 市场负责人（选择）
- 授权等级
- 授权到期时间

**1.1.5 编辑小区**
编辑小区授权信息
**可编辑内容**：
- 小区名称
- 小区地址
- 市场负责人
**注意**：不允许在此修改授权等级和授权到期时间

**1.1.6 授权续期**
对各小区进行授权续期
**可修改内容**：
- 授权等级
- 授权到期时间
**时间选项**：
- 快捷选择：3个月、6个月、12个月、24个月、36个月
- 自定义到期时间
**权限变更规则**：
- 低等级改到高等级：直接增加权限菜单
- 高等级改到低等级：仍可访问高等级菜单，但仅可进行数据查询，不可进行其他操作

**1.1.7 查看续期记录**
查看授权续期历史记录
**显示字段**：
- 续期前等级
- 续期后等级
- 授权到期时间
- 操作人
- 操作时间
**功能支持**：筛选、导出等

#### 1.2 授权等级管理

**1.2.1 等级列表**
**显示字段**：
- 等级名称
- 授权小区数量
- 创建时间
- 最后修改人
- 最后修改时间
- 状态
- 操作（编辑、权限配置）

**1.2.2 筛选功能**
支持根据以下条件进行筛选：
- 等级名称
- 状态
- 创建时间
- 最后修改时间

**1.2.3 翻页功能**
- 分页条数调整
- 上一页/下一页调整
- 指定分页跳转

**1.2.5 新增等级**
创建新的许可等级
**录入字段**：
- 等级名称
- 权限配置（合并管理端、小程序的所有功能板块、功能点、按钮进行勾选）
**权限配置规则**：
- 选中代表可以访问
- 不选代表不允许访问
- 若只允许访问小程序，则管理端直接不勾选

**1.2.6 编辑等级**
编辑许可等级
**可修改内容**：
- 等级名称
- 权限菜单

**1.2.7 权限配置**
合并管理端、小程序的所有功能板块、功能点、按钮进行勾选
**配置规则**：
- 选中代表可以访问
- 不选代表不允许访问
- 若只允许访问小程序，则管理端直接不勾选

**小程序端功能模块**：
- 事件管理（小区建议、报事报修、信息发布）
- 审批流程（支出申请、用印申请、公告通知、征询意见）
- 用户互动（点赞、评论、订阅、分享）
- 消息通知（系统消息、互动消息、审批提醒）
- AI智能服务（事件概要、智能分析、处理建议）

**PC中台功能模块**：
- 事件管理后台（审核、置顶、删除、统计）
- 审批流程管理（流程配置、审批处理、进度跟踪）
- 用户管理（业主管理、角色分配、权限设置）
- 数据统计（事件统计、用户活跃度、审批效率）
- 系统配置（小区信息、通知设置、模板管理）



### 2. 模板中心页面

#### 2.1 流程模板管理

**2.1.1 流程模板列表**
**显示字段**：
- 模板名称
- 事务类型
- 流程层级
- 使用小区数量
- 操作（编辑、启用/停用、查看使用记录）

**2.1.2 筛选功能**
支持根据以下条件进行筛选：
- 模板名称
- 事务类型
- 流程层级

**2.1.3 翻页功能**
- 分页条数调整
- 上一页/下一页调整
- 指定分页跳转


**2.1.5 新增流程模板**
创建新的小区事务流程模板，通过添加不同类型的环节来构建完整流程

**环节类型配置**：
通过"新增环节"按钮，可添加以下类型的环节来组成完整流程：

**1. 发起环节**（必须，流程起点）
- 流程名称：如"维修工区审批流程"
- 事务类型：报事报修、费用申请、设施申请等，可自定义
- 流程说明：简要描述流程用途
- 附件要求：需要上传的文件（现场照片、相关证明等）
- 发起人权限：谁可以发起（业主、物业、管理员等）
- 表单字段：需要填写的内容（维修位置、问题描述、预估费用等）
- 紧急程度：是否设置紧急级别选择

**2. 审批环节**（可添加多个）
- 环节名称：如"物业初审"、"业委会审批"等
- 审批人设置：
  - 指定具体人员（张三、李四）
  - 指定角色（业委会主任、物业经理）
  - 发起人选择审批人
- 审批方式：
  - 依次审批（串行）
  - 同时审批（并行，全部通过）
  - 或签审批（任意一个通过）
- 时间设置：审批时限、超时处理方式
- 功能设置：是否必填审批意见、是否允许退回、是否允许加签

**3. 通知环节**（可添加多个）
- 环节名称：如"审批结果通知"、"进度提醒"等
- 通知对象：发起人、审批人、相关人员等
- 通知方式：小程序推送、短信、邮件
- 通知内容：自定义通知文字模板
- 触发条件：何时发送通知

**4. 执行环节**（可添加多个）
- 环节名称：如"维修施工"、"验收确认"等
- 执行人：谁来具体处理
- 执行时限：完成时间要求
- 完成标准：如何判断已完成
- 进度反馈：是否需要定期汇报进度

**5. 条件分支环节**（可选）
- 分支条件：根据金额、紧急程度、申请类型等设置不同处理路径
- 分支路径：不同条件下走不同的后续环节

**6. 结束环节**（必须，流程终点）
- 结果通知：通知相关人员流程已完成
- 满意度评价：是否需要发起人评价
- 归档设置：流程记录保存规则

**环节排序**：可通过拖拽调整环节顺序，系统自动连接各环节形成完整流程

**2.1.6 编辑流程模板**
编辑现有流程模板，可编辑上述所有配置内容


#### 2.2 问卷模板管理

**2.2.1 问卷模板列表**
**显示字段**：
- 模板名称
- 问卷类型
- 题目数量
- 操作（编辑、预览、复制、删除、查看统计）

**2.2.2 筛选功能**
支持根据以下条件进行筛选：
- 模板名称
- 问卷类型

**2.2.3 翻页功能**
- 分页条数调整
- 上一页/下一页调整
- 指定分页跳转

**2.2.4 导出功能**
- 选中内容导出选中部分
- 不选中内容则全部导出

**2.2.5 新增问卷模板**
创建新的问卷模板
**录入字段**：
- 模板名称
- 问卷类型（满意度调查、需求调研、意见征询、服务评价）
- 问卷描述
- 题目设置
- 答题规则

**2.2.6 编辑问卷模板**
编辑现有问卷模板
**可编辑内容**：
- 模板基本信息
- 题目内容和类型
- 选项设置
- 逻辑跳转规则

**2.2.7 预览问卷**
预览问卷模板效果
**预览功能**：
- 模拟答题流程
- 检查逻辑跳转
- 验证题目显示
- 测试提交流程

**2.2.8 查看统计**
查看问卷使用统计数据
**统计内容**：
- 使用次数统计
- 回收率分析
- 答题时长分析
- 题目完成率



### 3. AI中心页面

#### 3.1 提示词管理

**3.1.1 提示词列表**
**显示字段**：
- 提示词名称
- 提示词内容
- 应用板块
- 操作（编辑、测试、复制、删除）

**3.1.2 筛选功能**
支持根据以下条件进行筛选：
- 应用板块
- 提示词名称

**3.1.3 分页功能**
- 分页条数调整（10/20/50/100条每页）
- 上一页/下一页调整
- 指定分页跳转
- 显示总记录数

**3.1.4 新增提示词**
创建新的AI提示词模板
**基本信息**：
- 提示词名称
- 提示词内容
- 应用板块

**提示词配置**：
- 系统角色设定
- 提示词模板内容
- 参数变量设置（如：{事件类型}、{紧急程度}、{处理时间}等）
- 输出格式要求（JSON、文本、结构化数据）
- 输出长度限制
- 温度参数设置（创意度控制）

**3.1.5 编辑提示词**
可编辑新建提示词的维度

**3.1.6 提示词测试**
在线测试提示词效果
**测试功能**：
- 输入测试数据
- 实时调用AI接口
- 查看输出结果


#### 3.2 API配置管理

**3.2.1 API配置列表**
**显示字段**：
- 配置名称
- API提供商（OpenAI、百度文心、阿里通义等）
- 模型名称
- 状态（启用/停用）
- 调用优先级
- 日调用量限制
- 当日已用量
- 月度预算
- 当月已用成本
- 最后更新时间
- 操作（编辑、测试、监控）

**3.2.2 筛选功能**
支持根据以下条件进行筛选：
- 配置名称
- API提供商
- 模型名称
- 状态
- 调用优先级
- 最后更新时间

**3.2.3 新增API配置**
创建新的AI服务接口配置
**基本信息**：
- 配置名称
- API提供商
- 模型名称
- 接口地址
- API密钥
- 调用优先级（1-10，数字越小优先级越高）

**调用限制**：
- 日调用量限制
- 月调用量限制
- 并发请求限制
- 超时时间设置（秒）
- 重试次数设置

**成本控制**：
- 日预算限制
- 月预算限制
- 单次调用成本上限
- 预算预警阈值（如：80%时预警）

**质量控制**：
- 最低成功率要求
- 最大响应时间要求
- 异常率阈值
- 自动降级规则

**3.2.6 编辑API配置**
编辑新建API维度

**3.2.7 API测试**
测试API配置的可用性
**测试项目**：
- 连接性测试
- 认证测试
- 响应时间测试
- 输出质量测试
- 并发性能测试

**3.2.8 调用监控**
实时监控API调用情况
**监控指标**：
- 实时调用量
- 成功率统计
- 平均响应时间
- 错误类型分析
- 成本消耗统计
- 预算使用情况

**预警功能**：
- 调用量预警（接近限制时）
- 成本预警（超过预算阈值时）
- 质量预警（成功率下降时）
- 异常预警（错误率上升时）

### 4. 系统中心页面

#### 4.1 角色权限管理

**4.1.1 角色列表**
**显示字段**：
- 角色名称
- 角色类型（平台管理员、小区管理员、业委会成员、物业、业主）
- 角色描述
- 用户数量
- 适用平台（总后台、PC中台、小程序端）
- 数据权限范围（全部数据、指定数据、个人数据）
- 关联小区数量
- 状态（启用/停用）
- 操作（编辑、权限配置、用户分配、删除）

**4.1.2 筛选功能**
支持根据以下条件进行筛选：
- 角色名称
- 角色类型
- 状态
- 权限范围
- 关联小区

**4.1.3 分页功能**
- 分页条数调整（10/20/50/100条每页）
- 上一页/下一页调整
- 指定分页跳转
- 显示总记录数和当前页信息

**4.1.4 新增角色**
创建新的管理员角色
**录入字段**：
- 角色名称
- 角色类型（平台管理员、小区管理员、业委会成员、物业、业主）
- 角色描述
- 适用平台（总后台、PC中台、小程序端）
- 权限配置（功能模块权限矩阵）

  - 小区中心权限（查看、新增、编辑、删除、授权续期）
  - 模板中心权限（查看、新增、编辑、删除、发布）
  - AI中心权限（查看、配置、测试、监控）
  - 系统中心权限（查看、用户管理、角色管理、系统配置）
- 数据权限范围
  - 全部数据：可查看所有小区数据
  - 指定数据：仅可查看指定小区数据
  - 个人数据：仅可查看自己创建的数据
- 是否允许多小区管理

**4.1.5 编辑角色**
编辑现有角色信息
**可编辑内容**：
- 角色名称
- 角色描述
- 权限配置
- 数据权限范围
- 适用平台范围
**注意**：系统预设角色（超级管理员）不允许删除，但可编辑权限

**4.1.6 权限配置**
详细的权限矩阵配置界面
**权限类型**：
- 菜单权限（可访问的功能模块）
- 操作权限（增删改查、审批、发布等）
- 数据权限（可查看的数据范围）
- 功能权限（特殊功能的使用权限）

**权限配置规则**：
- 平台级权限：跨小区的管理权限
- 小区级权限：单个小区内的管理权限
- 功能级权限：具体功能模块的操作权限
- 数据级权限：数据查看和操作的范围权限

**配置规则**：
- 勾选代表拥有该权限
- 不勾选代表无该权限
- 上级权限包含下级权限（如编辑权限自动包含查看权限）
- 权限变更立即生效，已登录用户需重新登录

**1.3.4 角色权限模板配置**
为小区配置用户角色权限模板
**业主角色权限**：
- 事件创建：小区建议、报事报修
- 事件查看：查看所有公开事件和公告
- 事件互动：点赞、评论、订阅、分享
- 审批参与：参与征询意见投票
- 消息接收：接收系统消息和互动通知
- 个人管理：查看和编辑个人资料

**业委会成员权限**：
- 事件管理：创建、编辑、删除、置顶事件
- 审批流程：发起支出申请、用印申请、公告通知、征询意见
- 审批处理：审批各类申请，参与业委会投票
- 用户管理：查看业主信息，管理用户评论
- 数据查看：查看财务信息和统计报表
- 系统配置：配置小区基本信息和通知设置

**物业角色权限**：
- 事件处理：处理报修请求，发布物业通知
- 事件管理：编辑和更新与物业相关的事件
- 状态更新：更新事件处理状态和进展
- 消息发送：向业主发送物业通知
- 数据查看：查看与物业相关的统计数据

**4.1.7 用户分配**
为角色分配用户
**分配功能**：
- 批量添加用户到角色
- 从角色中移除用户
- 查看角色下的所有用户
- 设置用户在角色中的权限范围
- 用户角色变更历史记录

**4.1.8 角色权限继承**
设置角色之间的权限继承关系
**继承规则**：
- 上级角色权限自动包含下级角色权限
- 特殊权限需要单独配置
- 权限冲突时以最高权限为准
- 继承关系变更需要管理员确认

**4.1.9 角色状态管理**
管理角色的启用/停用状态
**状态变更规则**：
- 停用角色：该角色下的所有用户立即失去相应权限
- 启用角色：该角色下的用户恢复相应权限
- 删除角色：需先将该角色下的用户转移到其他角色
- 系统预设角色不允许删除

#### 4.2 用户账号管理

**4.2.1 用户列表**
**显示字段**：
- 用户名
- 真实姓名
- 所属小区
- 手机号
- 邮箱
- 所属角色（支持多角色显示）
- 权限范围
- 账号状态
- 最后登录时间
- 登录次数
- 创建时间
- 操作（编辑、角色管理、权限配置、重置密码、查看日志、状态管理）

**4.2.2 筛选功能**
支持根据以下条件进行筛选：
- 用户名
- 真实姓名
- 所属小区
- 手机号
- 所属角色
- 权限范围
- 账号状态
- 创建时间范围
- 最后登录时间范围
- 登录频率

**4.2.3 分页功能**
- 分页条数调整（10/20/50/100条每页）
- 上一页/下一页调整
- 指定分页跳转
- 显示总记录数和当前页信息
- 支持导出用户列表

**4.2.4 新增用户**
创建新的管理员账号
**录入字段**：
- 用户名（登录账号）
- 真实姓名
- 所属小区（支持多小区）
- 手机号
- 邮箱
- 初始密码
- 所属角色（支持多角色）
- 权限范围设置
- 账号有效期
- 账号状态（正常/锁定）
- 备注信息
**验证规则**：
- 用户名唯一性检查
- 手机号格式验证
- 邮箱格式验证
- 密码强度要求（8位以上，包含字母数字）

**4.2.5 编辑用户**
编辑用户基本信息
**可编辑内容**：
- 真实姓名
- 所属小区
- 手机号
- 邮箱
- 所属角色
- 权限范围
- 账号有效期
- 备注信息
**注意**：用户名不允许修改，密码需通过专门的重置功能

**4.2.6 角色管理**
管理用户的角色分配
**角色操作**：
- 添加角色：为用户分配新角色
- 移除角色：从用户中移除角色
- 角色权限：查看用户通过角色获得的权限
- 角色冲突：处理多角色权限冲突
- 角色历史：查看用户角色变更历史

**4.2.7 权限配置**
为用户配置个性化权限
**权限类型**：
- 继承权限：通过角色继承的权限
- 附加权限：额外授予的权限
- 限制权限：限制或停用的权限
- 临时权限：有时效性的权限

**权限配置规则**：
- 用户权限 = 角色权限 + 附加权限 - 限制权限
- 临时权限到期自动失效
- 权限变更需要审批流程
- 敏感权限需要二次确认

**4.2.8 密码重置**
重置用户登录密码
**重置方式**：
- 系统生成随机密码
- 管理员设置临时密码
- 发送重置链接到邮箱/短信
- 强制用户下次登录修改密码
**安全规则**：
- 重置后用户首次登录必须修改密码
- 密码重置操作记录到操作日志
- 通过短信或邮件通知用户新密码
- 密码复杂度要求
- 密码有效期设置
- 密码历史记录（防止重复使用）

**4.2.9 账号状态管理**
管理用户账号的状态
**状态类型**：
- 正常：可正常登录使用
- 锁定：暂时禁止登录，可解锁
- 停用：永久禁止登录，需重新启用
**状态变更规则**：
- 锁定账号：立即踢出在线用户
- 解锁账号：用户可重新登录
- 停用账号：清除用户所有会话

**4.2.10 登录日志查看**
查看用户登录历史记录
**显示字段**：
- 登录时间
- 登录IP
- 登录设备
- 登录结果（成功/失败）
- 失败原因
- 会话时长
- 操作记录摘要
**功能支持**：
- 按时间范围筛选
- 按登录结果筛选
- 按IP地址筛选
- 异常登录预警

**4.2.11 批量操作**
支持批量管理用户
**批量功能**：
- 批量导入用户（Excel模板）
- 批量修改用户信息
- 批量分配角色
- 批量设置权限
- 批量启用/停用账号
- 批量重置密码
- 批量导出用户数据

**4.2.12 用户权限审计**
审计用户权限变更历史
**审计内容**：
- 权限变更时间和操作人
- 变更前后的权限对比
- 变更原因和说明
- 权限使用情况统计
- 异常权限使用预警

#### 4.3 系统配置管理

**4.3.1 基础配置**
系统基础参数设置
**配置项目**：
- 系统名称
- 系统Logo
- 登录页背景
- 会话超时时间
- 密码策略配置
  - 最小长度
  - 复杂度要求
  - 有效期限
  - 历史密码限制

**4.3.2 安全配置**
系统安全相关设置
**配置项目**：
- 登录失败锁定策略
  - 失败次数阈值
  - 锁定时间
  - 解锁方式
- IP白名单管理
- 操作日志保留期限
- 数据备份策略

**4.3.3 通知配置**
系统通知相关设置
**配置项目**：
- 短信服务配置
  - 服务商选择
  - API密钥设置
  - 发送频率限制
- 邮件服务配置
  - SMTP服务器设置
  - 发件人信息
  - 邮件模板管理

**4.3.4 系统监控**
系统运行状态监控
**监控指标**：
- 系统负载
- 内存使用率
- 磁盘空间
- 数据库连接数
- 在线用户数
- 接口响应时间
**告警设置**：
- 阈值配置
- 告警方式
- 告警接收人

### 5. 数据中心页面（未定）

#### 5.1 用户行为监控

**5.1.1 用户活跃度统计**
**统计维度**：
- 日活跃用户数（DAU）
- 周活跃用户数（WAU）
- 月活跃用户数（MAU）
- 用户留存率（次日、7日、30日）
- 用户访问时长分布
- 功能使用频率统计

**5.1.2 用户行为分析**
**行为追踪**：
- 页面访问路径分析
- 功能点击热力图
- 用户操作流程分析
- 异常行为检测
- 权限使用情况统计
- 错误操作统计

**5.1.3 小区活跃度对比**
**对比维度**：
- 各小区用户活跃度排名
- 功能使用率对比
- 事件创建和处理效率
- 审批流程完成率
- 用户满意度评分

#### 5.2 系统性能监控

**5.2.1 系统运行状态**
**监控指标**：
- 系统响应时间
- 数据库连接状态
- 服务器资源使用率（CPU、内存、磁盘）
- API调用成功率
- 错误日志统计
- 系统可用性监控

**5.2.2 业务数据统计**
**数据统计**：
- 事件创建和处理统计
- 审批流程效率分析
- 用户反馈和投诉统计
- AI服务调用统计
- 消息推送成功率
- 数据存储使用情况

**5.2.3 预警和告警**
**告警规则**：
- 系统性能异常告警
- 用户异常行为告警
- 数据异常变化告警
- 安全风险预警
- 业务指标异常告警

#### 5.3 数据分析报表

**5.3.1 运营数据报表**
**报表类型**：
- 用户增长趋势报表
- 功能使用情况报表
- 小区管理效率报表
- 问题处理时效报表
- 用户满意度报表

**5.3.2 财务数据报表**
**报表内容**：
- 小区授权费用统计
- AI服务使用成本
- 系统运维成本
- 收入趋势分析
- 成本效益分析

**5.3.3 自定义报表**
**报表配置**：
- 自定义统计维度
- 自定义时间范围
- 自定义图表类型
- 报表定时生成
- 报表导出功能

#### 5.4 日志管理

**5.4.1 操作日志**
**日志内容**：
- 用户登录日志
- 权限变更日志
- 数据修改日志
- 系统配置变更日志
- 敏感操作日志

**5.4.2 系统日志**
**日志类型**：
- 应用程序日志
- 错误日志
- 性能日志
- 安全日志
- 数据库操作日志

**5.4.3 日志分析**
**分析功能**：
- 日志检索和过滤
- 异常模式识别
- 趋势分析
- 关联分析
- 日志可视化

---

**文档结束**

> 本文档专注于总后台核心功能页面设计，通过**流程可配**、**小区权限可配**、**角色权限可配**三大配置化能力，实现平台的灵活管理和标准化运营。系统监控模块为平台运营提供全面的数据支撑和决策依据。