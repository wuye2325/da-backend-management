# 后台需求描述

## 一、PC 网页端总后台（admin）

### 1.1 小区管理

#### 小区管理 — 小区基础信息
- 新增小区：名称 / 地址 / 等基础属性（必填）+ 绿化率 / 建成年代等扩展属性（可选）
- 编辑小区：可对小区的基础属性进行编辑
- 删除小区：支持软删除（保留历史记录）或硬删除（需二次确认）
- 查询小区：支持按小区名称、地址等多维度搜索 + 分页展示

#### 小区管理 — 业主清册
- 新增清册：小区楼栋，单元，户数，房型（面积）等信息录入；存在业主用户信息绑定（一个房间仅能绑定一名用户）
- 编辑清册：对小区清册数据进行编辑
- 删除清册：支持软删除（保留历史记录）或硬删除（需二次确认）
- 导入清册：支持下载清册模板，然后进行导入清册
- 导出清册：支持导出清册的全部内容


#### 小区管理 — 小区配置管理 — 流程配置
- 流程发起配置
  - 后台配置：可配置其（步骤、角色、会签、或签等）
  - 流程模板：初始化默认流程模板配置；自定义流程模板配置
  - 问卷模板
- 流程开关配置：可开启 / 关闭后台流程的配置

#### 小区管理 — 小区配置管理 — 其他配置
- 附议比例配置：可灵活配置其附议的比例
- 公示时长配置：可灵活配置其公示时长
- 业主认证字段配置：可灵活配置业主认证的字段

### 1.2 用户管理

#### 用户管理 — 用户基础信息
- 新增用户：必填字段（账号、姓名、联系方式等）；选填字段（昵称、头像、性别、年龄等）
- 编辑用户：可编辑字段（姓名、联系方式、状态等）
- 删除用户：支持软删除（保留历史记录）或硬删除（需二次确认）
- 查询用户：支持按账号、姓名、状态、联系方式等多维度搜索 + 分页展示
- 字段要求：联系方式需格式校验（手机号）；账号需唯一性校验
- 账号生成规则：
  - 当登录小程序的用户，没有清册数据时，注册认证时是否只需要填写如（昵称，姓名，性别等必填信息后）其他非必填项，自动生成随机数据；
  - 当批量导入的清册数据时，若只有（房屋，手机号，姓名时），其他的数据项是否自动生成（如昵称，头像等）
- 删除保护机制：若用户存在业务数据（如发帖记录），是否禁止删除？

#### 用户管理 — 用户状态
- 启用：用户可正常登录系统，使用权限内功能
- 停用：用户无法登录，但历史数据保留；需支持批量启用 / 停用操作
- 状态变更：操作需记录日志（操作人、时间、原状态→新状态）

#### 用户管理 — 用户绑定小区 / 楼栋 / 房屋
- 绑定范围：支持为用户分配至少最多 1 个小区，每个小区下可选楼栋 / 具体房屋
- 数据隔离：用户登录后仅能查看 / 操作其绑定的小区 / 楼栋数据（核心权限控制点！）
- 操作方式：支持可视化树形结构选择小区与楼栋（类似组织架构选择器）
- 变更影响：修改绑定关系后，用户下次登录生效新数据范围
- 绑定关系限制：用户是否允许跨小区绑定？同一小区内是否允许多楼栋绑定？
> **[优化建议]**：
> - **明确绑定关系**：建议明确为“一个用户可绑定多个小区的多个房屋”，以支持业主在不同小区拥有多套房产的场景。
> - **增加历史绑定记录**：记录用户历史绑定信息，便于追溯和审计。

#### 用户管理 — 用户绑定角色
- 角色分配：支持为用户分配多个角色（如 "物业管理员"+"财务审核员"）
- 批量操作：可同时为多个用户分配 / 移除同一角色
- 权限叠加逻辑：用户最终权限 = 所有绑定角色的权限并集
- 冲突处理：明确角色权限优先级规则（如无冲突则合并，有冲突时按角色优先级覆盖）

### 1.3 角色权限管理

#### 角色权限管理 — 角色基础信息
- 角色列表：展示所有初始化角色（含系统内置角色如超级管理员、业委会主任、业委会副主任、业委会成员、业主、物业、住户、租户等），支持按名称 / 类型搜索
- 新增角色：需填写：角色名称（唯一）、描述、关联端口（Web / 小程序）
- 编辑角色：可修改权限配置和基础信息，但超级管理员角色仅允许修改描述
- 删除角色：限制① 超级管理员不可删除 ② 已被用户绑定的角色需先解绑

#### 角色权限管理 — 超级管理员特权
- 权限覆盖：自动拥有所有端口、所有模块的全量权限（无需配置）
- 操作限制：仅允许特定账号担任（如系统初始化账号）
- 权限继承：普通管理员角色不可通过授权获得超级管理员同等权限

#### 角色权限管理 — 权限层级
- 模块级：决定是否显示整个业务模块（如 “事件管理”，“报事报修”）
- 页面级：控制子菜单 / 页面的访问（如 “事件管理” 可见，但 “事件详情” 不可见）
- 数据级：限制数据可见范围（如业委会主任仅看本小区数据，admin 可看跨小区数据）
- 按钮级：停用具体操作（如 “删除业主”，“导出全量数据” 等高风险操作）

#### 角色权限管理 — 多端权限隔离机制
- pc 后台：支持完整四层权限配置（模块→页面→数据→按钮）
- 业主小程序：侧重数据权限控制（如业主仅能操作报事报修等）
- 物业小程序：强化按钮级权限（如维修工仅有 “接单” 权限无 “结单” 权限）
- 同步规则：同一角色在不同端可配置独立权限集（如业委会主任角色，使用手机号登录小程序和 pc 后台，显示权限功能是独立的）

#### 角色权限管理 — 授权管理流程
- 角色授权：在角色配置页完成权限分配→自动生效至所有绑定该角色的用户
- 用户授权：支持对单个用户追加特殊权限（覆盖角色权限）
- 批量授权：可同时为多个角色配置相同权限模板
- 权限继承：用户绑定多角色时，权限按并集原则合并（冲突时取最高权限）
- 权限变更实时性：用户权限变更后（含角色 / 个人授权），下次请求时立即生效，无需重新登录
- 权限冲突解决：建立优先级规则：用户个人授权 > 角色权限 > 默认权限
- 数据权限引擎：需设计独立的数据权限规则引擎（如基于组织架构树实现数据自动过滤）
- 管理员审计：所有管理员（业委会主任）的操作需记录完整操作日志（含敏感操作二次验证）
> **[优化建议]**：
> - **增加权限预览功能**：在分配权限时，可以模拟该角色的登录，查看其权限范围内的界面和数据，确保权限分配的准确性。
> - **增加权限申请/审批流程**：对于敏感权限，用户可在线提交申请，由指定管理员审批，形成完整的权限管理闭环。

#### 授权许可
- 给各个中台小区开权限

### 1.4 发布管理

#### 发布管理 — 大事记
- 可查询、查看、删除所有用户发布的大事记及其详情（含互动情况与内容），可增删改查自己发布的大事记
- 查询大事记：支持按小区名称、标题、发布人等多维度搜索 + 分页展示
- 发布大事记字段：标题、选择所属小区（必填）；描述、图片、附件、进展（非必填）
- 大事记中可添加进展，进展包括富文本（通知公告等）、问卷调查、流程等

#### 发布管理 — 富文本（通知、公告、建议、动态等）
- 可查询、查看、删除所有用户发布的富文本及其详情（含互动情况与内容），可增删改查自己发布的富文本
- 查询富文本：支持按小区名称、标题、发布人等多维度搜索 + 分页展示
- 发布富文本字段：标题、选择所属小区、正文、内容类型、是否首页通知（必填）；
- 富文本可发布内容包含：
  - 字体： 字体类型、大小、颜色。
  - 样式： 粗体、斜体、下划线、删除线。
  - 对齐： 左对齐、居中、右对齐、两端对齐。
  - 段落： 行间距、段落间距、缩进（首行缩进、悬挂缩进）。
  - 列表： 项目符号列表、编号列表。
  - 背景色： 文字或段落的背景颜色。
  - 标题： 不同层级的标题。
  - 表格： 包含行、列、单元格，可设置边框、背景。
  - 水平线： 分隔线。
  - 图片： 可以插入并调整大小的图像。
  - 超链接： 可点击的链接，指向网页、文件或邮箱地址。
  - 视频 / 音频： 嵌入的视频或音频播放器。
  - 其他对象： 如嵌入的文档、图表等。
  - 发布不同类型的富文本信息时，选择或录入事件进行归类

#### 发布管理 — 问卷
- 新增问卷：新增问卷信息内容
- 编辑问卷：编辑问卷信息内容
- 删除问卷：删除问卷信息
- 导出问卷结果数据：导出问卷结果
> **[优化建议]**：
> - **明确实现方式**：此处应明确是“集成第三方问卷服务（如问卷星）”还是“自研问卷功能”。
>   - **若集成**：需考虑账号打通、数据回传等问题。
>   - **若自研**：需细化问卷题型（单选、多选、填空等）、发布范围、结果统计与可视化等功能。

#### 发布管理 — 流程
- 可查询、查看、删除所有用户发布的流程及其详情（含流程进度、互动情况与内容），可增删改查自己发布的流程
- 查询流程：支持按小区名称、标题、发布人等多维度搜索 + 分页展示
- 发布流程字段：标题、选择所属小区、正文、流程类型（必填）

### 1.5 系统日志

#### 系统日志（log4j 插件）
- 用户登录 / 编辑 / 删除 / 查询 /：记录所有用户操作的详情日志
- 系统记录：记录系统各项级别日志

## 数据统计

### （数据驱动）
- 缺少统计分析板块
- 日活、月活、注册量要不要看
- 事件统计分析表？
> **[优化建议]**：
> - **明确核心指标**：建议至少包含以下核心数据看板：
>   - **用户数据**：总注册量、日/月活跃用户（DAU/MAU）、用户增长趋势、业主认证率。
>   - **事件分析**：各类事件（如报事报修、投诉建议）的数量、处理时长、完成率、满意度评价。
>   - **内容分析**：通知公告的阅读量、点赞/评论数，问卷的参与率。
>   - **财务分析**：物业费收缴率、公共收益（如广告、停车费）统计。

### 运营方案
- 数据→市场→数据导向的优化更新

## 其他
- □ 此任务已被删除
- SOW，技术架构、业务架构、数据架构、・・・数据流程、数据走向、功能架构、云服务器架构、・・・

## 总后台
- 数据中心（小区管理、用户管理）
- 内容中心（事件统计、进展统计、审核统计）
- 授权许可（授权等级、等级权限）
- 系统中心（角色权限、系统日志）
- 配置中心（流程模板配置、问卷模板配置、・・・）
- 统计分析（市场、运营提报表需求，包含报表名称和字段）
- AI 管理（AI 提示词 API 配置）
- https://api-docs.deepseek.com/zh-cn/prompt-library/
> **[优化建议]**：
> - **具体化AI应用场景**：
>   - **智能客服/问答**：训练一个了解小区规章制度、办事流程的AI助手，解答业主的常见问题。
>   - **内容智能审核**：自动审核用户发布的帖子、评论，识别违规内容（如广告、不当言论）。
>   - **数据智能分析**：利用AI分析统计数据，自动生成数据报告，发现潜在问题并提出优化建议。

## PC 中台
- 配置中心（流程配置）
- 统计分析（市场、运营提报表需求，包含报表名称和字段）
- 系统中心（角色权限、系统日志）
- 数据中心（小区管理、用户管理（业主清册））
- 业务中心：
  - 事件及进展的增删改查
  - 流程（用印、通知、公告・・・等）的增删改查和审批
  - 问卷的增删改查、导出
  - 统计：事件统计、进展统计、审核统计