# 导航流程设计

## 🗺️ 流程概述

本文档定义了业委会小区管理系统的页面导航流程，包括主要用户路径、页面跳转逻辑和交互流程。

### 🎯 设计目标
- 提供清晰的用户导航路径
- 减少用户操作步骤
- 保持一致的导航体验
- 支持快速访问常用功能

## 🏗️ 整体架构流程

### 应用导航结构
```
应用启动
    ↓
首页 (发现)
    ├── 搜索页面
    ├── 事件详情页
    ├── 消息通知页
    └── AI速览详情页
    ↓
参与页 (首页)
    ├── 事件创建页
    ├── 信息发布页
    ├── 投诉建议页
    ├── 待办详情页
    └── 工作记录页
    ↓
个人中心
    ├── 个人资料页
    ├── 系统设置页
    ├── 帮助中心页
    └── 关于页面
```

## 📱 主要导航流程

### 1. 首页导航流程

#### 1.1 首页入口流程
```
启动应用
    ↓
[加载中...]
    ↓
首页 (发现页)
    ├── 顶部导航
    │   ├── 小区名称 → 小区信息页
    │   └── 通知图标(3) → 消息通知页
    ├── 搜索栏 → 搜索页面
    ├── 重要公示轮播
    │   └── 点击轮播项 → 公示详情页
    ├── 事件筛选标签
    │   └── 点击标签 → 筛选对应事件
    ├── 事件列表
    │   ├── 点击事件卡片 → 事件详情页
    │   ├── [参与讨论] → 讨论页面
    │   └── [关注] → 添加到关注列表
    └── 底部导航
        ├── [发现] → 当前页面
        ├── [参与] → 参与页面
        └── [我的] → 个人中心

**注：1.0版本已移除AI速览卡片功能**
```

#### 1.2 搜索流程
```
首页搜索栏
    ↓
点击搜索栏
    ↓
搜索页面
    ├── 搜索输入框 (自动聚焦)
    ├── 搜索历史
    │   └── 点击历史项 → 执行搜索
    ├── 热门搜索
    │   └── 点击热门词 → 执行搜索
    ├── 高级筛选
    │   ├── [筛选] → 展开筛选面板
    │   └── [应用筛选] → 执行筛选搜索
    ├── 搜索结果
    │   └── 点击结果项 → 对应详情页
    └── 导航操作
        ├── [← 返回] → 返回首页
        └── [✕ 取消] → 返回首页
```

### 2. 参与页导航流程

#### 2.1 参与页主流程
```
底部导航 [参与]
    ↓
参与页 (首页)
    ├── 顶部导航
    │   ├── 小区名称
    │   └── [❓ 帮助] → 功能说明页
    ├── 用户角色卡片
    │   ├── [编辑资料] → 个人资料编辑页
    │   ├── [工作记录] → 工作记录页
    │   └── [权限设置] → 权限管理页
    ├── 流程功能区
    │   ├── [创建事件] → 事件创建页
    │   ├── [发布信息] → 信息发布页
    │   ├── [投诉建议] → 投诉建议页
    │   └── [发起投票] → 投票创建页
    ├── 待办清单
    │   ├── [全部] → 待办列表页
    │   ├── 点击待办项 → 待办详情页
    │   ├── [立即处理] → 对应处理页面
    │   └── [添加待办] → 待办创建页
    ├── 最近活动
    │   ├── 点击活动项 → 活动详情页
    │   └── [查看全部] → 活动历史页
    └── 底部导航
        ├── [发现] → 首页
        ├── [参与] → 当前页面
        └── [我的] → 个人中心
```

#### 2.2 创建流程
```
参与页功能区
    ↓
选择创建类型
    ├── [创建事件]
    │   ↓
    │   事件创建页
    │   ├── 填写表单
    │   ├── [取消] → 返回参与页
    │   └── [创建事件] → 提交成功 → 事件详情页
    ├── [发布信息]
    │   ↓
    │   信息发布页
    │   ├── 填写表单
    │   ├── [✨ AI辅助] → AI写作助手
    │   ├── [保存草稿] → 保存并返回
    │   └── [立即发布] → 发布成功 → 信息详情页
    ├── [投诉建议]
    │   ↓
    │   投诉建议页
    │   ├── 填写表单
    │   ├── [取消] → 返回参与页
    │   └── [提交投诉] → 提交成功 → 投诉详情页
    └── [发起投票]
        ↓
        投票创建页
        ├── 填写表单
        ├── [取消] → 返回参与页
        └── [发起投票] → 创建成功 → 投票详情页
```

### 3. 个人中心导航流程

#### 3.1 个人中心主流程
```
底部导航 [我的]
    ↓
个人中心页
    ├── 顶部导航
    │   ├── 个人中心标题
    │   └── [⚙️ 设置] → 系统设置页
    ├── 用户信息区
    │   ├── 头像 → 头像编辑页
    │   ├── 姓名 → 个人资料页
    │   └── 角色标识 → 角色说明页
    ├── 数据统计区
    │   ├── 本月处理 → 处理记录页
    │   ├── 待办事项 → 待办列表页
    │   └── 参与投票 → 投票记录页
    ├── 功能菜单
    │   ├── [📋 我的事件] → 事件管理页
    │   ├── [💬 我的消息] → 消息中心页
    │   ├── [⭐ 我的关注] → 关注列表页
    │   ├── [📊 数据报告] → 数据分析页
    │   ├── [❓ 帮助中心] → 帮助页面
    │   └── [ℹ️ 关于应用] → 关于页面
    └── 底部导航
        ├── [发现] → 首页
        ├── [参与] → 参与页
        └── [我的] → 当前页面
```

## 🔄 详情页导航流程

### 1. 事件详情页流程

#### 1.1 事件详情主流程
```
事件卡片点击
    ↓
事件详情页
    ├── 顶部导航
    │   ├── [← 返回] → 返回上一页
    │   ├── 事件标题 (截断显示)
    │   └── [⋯ 更多] → 操作菜单
    │       ├── [分享] → 分享功能
    │       ├── [收藏] → 添加收藏
    │       ├── [举报] → 举报页面
    │       └── [编辑] → 事件编辑页 (权限控制)
    ├── 事件基本信息展示
    ├── 事件基本信息
    │   ├── 负责人 → 用户资料页
    │   ├── 影响范围 → 范围详情页
    │   └── 相关文件 → 文件预览页
    ├── 操作按钮区
    │   ├── [参与讨论] → 讨论页面
    │   ├── [关注事件] → 添加关注
    │   ├── [投票] → 投票页面 (如有)
    │   └── [分享] → 分享功能
    ├── 时间线筛选器
    │   ├── [全部] → 显示所有记录
    │   ├── [进展] → 只显示进展记录
    │   ├── [讨论] → 只显示讨论记录
    │   └── [投票] → 只显示投票记录
    ├── 结构化时间线
    │   ├── 时间线项点击 → 详细信息弹窗
    │   ├── [查看详情] → 具体记录详情页
    │   └── [回复] → 回复输入框
    └── 业委会操作区 (权限控制)
        ├── [更新进展] → 进展更新页
        ├── [添加记录] → 记录添加页
        └── [结束事件] → 确认对话框
```

#### 1.2 事件操作流程
```
事件详情页操作
    ├── 参与讨论流程
    │   ↓
    │   讨论页面
    │   ├── 查看历史讨论
    │   ├── [发表评论] → 评论输入框
    │   ├── [回复评论] → 回复输入框
    │   └── [← 返回] → 返回事件详情
    ├── 投票流程 (如适用)
    │   ↓
    │   投票页面
    │   ├── 查看投票选项
    │   ├── 选择投票选项
    │   ├── [提交投票] → 投票成功提示
    │   └── [查看结果] → 投票结果页
    └── 关注流程
        ↓
        [关注事件] → 添加到关注列表
        ↓
        关注成功提示
        ↓
        返回事件详情 (按钮变为"已关注")
```

### 2. 消息通知页流程

```
顶部通知图标点击
    ↓
消息通知页
    ├── 顶部导航
    │   ├── [← 返回] → 返回上一页
    │   ├── 消息通知标题
    │   └── [🗑️ 清空] → 清空确认对话框
    ├── 消息筛选
    │   ├── [全部] → 显示所有消息
    │   ├── [未读] → 只显示未读消息
    │   ├── [系统] → 只显示系统消息
    │   └── [互动] → 只显示互动消息
    ├── 消息列表
    │   ├── 点击消息项 → 消息详情页/相关页面
    │   ├── [标记已读] → 标记为已读
    │   ├── [删除] → 删除确认
    │   └── 左滑操作 → 快捷操作菜单
    └── 批量操作
        ├── [全选] → 选择所有消息
        ├── [标记已读] → 批量标记已读
        └── [删除] → 批量删除确认
```

## 🎯 快捷操作流程

### 1. 快速创建流程

#### 从首页快速创建
```
首页长按空白区域
    ↓
快捷操作菜单
    ├── [📝 创建事件] → 事件创建页
    ├── [📢 发布信息] → 信息发布页
    ├── [💬 投诉建议] → 投诉建议页
    └── [🗳️ 发起投票] → 投票创建页
```

#### 从参与页快速操作
```
参与页功能区
    ↓
一键操作
    ├── [创建事件] → 直接进入创建页
    ├── [发布信息] → 直接进入发布页
    ├── [投诉建议] → 直接进入投诉页
    └── [发起投票] → 直接进入投票页
```

### 2. 搜索快捷流程

```
任意页面下拉
    ↓
全局搜索框出现
    ↓
输入搜索内容
    ↓
实时搜索结果
    ├── 事件结果 → 事件详情页
    ├── 公告结果 → 公告详情页
    ├── 用户结果 → 用户资料页
    └── [查看全部] → 搜索结果页
```

## 🔙 返回和导航逻辑

### 1. 返回按钮逻辑

```
页面返回优先级:
1. 浏览器/应用返回按钮
2. 页面顶部返回按钮
3. 手势返回 (移动端)

返回目标:
- 详情页 → 列表页/上一页
- 创建页 → 参与页/触发页
- 设置页 → 个人中心
- 搜索页 → 首页
- 其他页 → 上一页或首页
```

### 2. 深度链接处理

```
外部链接进入:
直接访问详情页
    ↓
检查用户状态
    ├── 已登录 → 直接显示页面
    └── 未登录 → 登录页 → 目标页面
    ↓
提供导航上下文
    ├── 面包屑导航
    ├── 返回按钮 → 合理的上级页面
    └── 底部导航 → 主要页面入口
```

## 📱 手势导航

### 移动端手势支持

```
手势操作:
- 左右滑动 → 在主要页面间切换
- 下拉刷新 → 刷新当前页面数据
- 上拉加载 → 加载更多内容
- 长按 → 显示快捷操作菜单
- 双击 → 返回页面顶部
- 捏合缩放 → 图片/内容缩放 (适用页面)
```

### 手势反馈

```
视觉反馈:
- 滑动指示器 → 显示滑动进度
- 弹性回弹 → 边界滑动反馈
- 触觉反馈 → 重要操作震动提示
- 动画过渡 → 平滑的页面切换
```

## 🔄 状态保持

### 页面状态管理

```
状态保持策略:
- 滚动位置 → 返回时恢复滚动位置
- 筛选条件 → 保持用户选择的筛选
- 表单数据 → 临时保存未提交数据
- 搜索历史 → 记录搜索关键词
- 用户偏好 → 记住用户操作习惯
```

### 数据同步

```
实时更新:
- 消息通知 → 实时推送新消息
- 事件状态 → 自动更新进展状态
- 投票结果 → 实时更新投票数据
- 待办事项 → 同步待办状态变化
```

## 🚨 错误处理流程

### 网络错误处理

```
网络异常:
显示错误页面
    ├── 错误信息说明
    ├── [重试] → 重新加载页面
    ├── [返回] → 返回上一页
    └── [离线模式] → 显示缓存内容
```

### 权限错误处理

```
权限不足:
显示权限提示
    ├── 权限说明
    ├── [申请权限] → 权限申请流程
    ├── [联系管理员] → 联系方式
    └── [返回] → 返回可访问页面
```

---

*此导航流程文档将在开发过程中持续更新和完善*