# 首页(发现页) 线框图设计

## 📱 页面概述

首页是用户进入系统后的主要信息获取页面，展示小区的重要动态和事件列表。

### 🎯 设计目标
- 快速获取小区重要信息
- 便捷浏览和筛选事件
- 保持信息层次清晰
- 简洁高效的用户体验

### ⚠️ 1.0版本设计调整
**AI速览卡片取消说明：**
考虑到项目1.0初期，入驻的小区人数不会太多，小区事件和数据相对较少，AI速览功能难以产生有价值的内容分析。为避免空状态和无意义的展示，决定在1.0版本中暂时取消AI速览卡片，待后续版本数据积累充足后再考虑引入。

## 🏗️ 页面结构

```
┌─────────────────────────────────────┐
│ 顶部导航栏 (TopNavigation)            │
├─────────────────────────────────────┤
│ 重要公示轮播 (ImportantNotices)       │
├─────────────────────────────────────┤
│ 事件筛选标签 + 筛选排序按钮            │
├─────────────────────────────────────┤
│ 事件列表 (EventList)                 │
│ ┌─────────────────────────────────┐ │
│ │ EventCard 1                   │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ EventCard 2                   │ │
│ └─────────────────────────────────┘ │
│ ...                                │
├─────────────────────────────────────┤
│ 底部导航栏 (BottomNavigation)         │
└─────────────────────────────────────┘
```

## 🧩 组件详细设计

### 1. 顶部导航栏 (TopNavigation)
**现有组件，需要优化**

```
┌───────────────────────────────────────────────┐
│ 阳光花园小区  🔍[搜索...]  🔔(未读红点提示)        │
└───────────────────────────────────────────────┘
```

**功能说明：**
- 显示小区名称和当前页面标题
- 搜索框：点击跳转到搜索页面
- 消息通知：有未读消息时显示红点提示，点击跳转到消息页
- 红点提醒：有未读消息时显示

### 2. 重要公示轮播 (ImportantNotices)
**现有组件，需要增强**

```
┌─────────────────────────────────────┐
│ 📢 重要公示                         │
├─────────────────────────────────────┤
│ [业委会] 36梯停车棚改造决议            │
│ AI概要：业主大会通过停车棚改造方案...   │
│ 发布时间：2024-01-15  👁️ 156       │
├─────────────────────────────────────┤
│ ● ○ ○                    [查看全部] │
└─────────────────────────────────────┘
```

**功能说明：**
- 轮播展示业委会置顶的重要事件
- 显示标题和AI总结的概要
- 显示发布者、时间、浏览量
- 支持左右滑动切换
- "查看全部"按钮跳转到公告列表

### 3. 事件筛选标签 + 筛选排序
**需要新增设计**

```
┌─────────────────────────────────────────────────────┐
│ [全部] [事件追踪] [我订阅的] [筛选icon ▼] [排序icon ▼]  │
└─────────────────────────────────────────────────────┘
```

**功能说明：**
- **Tab标签**：全部、事件追踪、我订阅的
- **筛选按钮**：支持按类型筛选
  - 小区建议、报事报修、支出申请、用印申请
  - 公告、通知、信息发布、征询意见
- **排序按钮**：支持多种排序方式
  - 时间正序、时间倒序、热度排序
- 选中状态用不同颜色标识

**技术实现：**
- 组件名：`EventFilterTabs`
- 位置：`src/components/EventFilterTabs.tsx`

### 4. 事件列表 (EventList)
**现有组件，需要优化**

每个事件卡片的设计：

```
┌─────────────────────────────────────────────────────┐
│ 🔥热点  36梯停车棚改造项目                            │
├─────────────────────────────────────────────────────┤
│ 👤 张伟 (业委会主任)  📅 2024-01-15                  │
├─────────────────────────────────────────────────────┤
│ AI概要：业主大会通过改造方案，预计3月开工建设...      │
├─────────────────────────────────────────────────────┤
│ 👁️ 156  👍 45  ⭐ 12                                │
├─────────────────────────────────────────────────────┤
│ #停车改造 #业主大会 #基础设施                        │
└─────────────────────────────────────────────────────┘
```

**设计改进说明：**

1. **发布者信息完整化**：
   - 移除了简单的角色标识 `[业委会]`
   - 新增发布者头像（👤 作为占位符，实际开发时使用真实头像）
   - 显示发布者实名：如 "张伟"
   - 显示发布者职务：如 "(业委会主任)"
   - 发布时间紧跟在发布者信息后

2. **布局优化**：
   - 第一行：火热程度标签 + 事件标题
   - 第二行：发布者完整信息 + 发布时间
   - 第三行：AI概要内容
   - 第四行：轻互动数据
   - 第五行：相关标签

**功能说明：**
- 火热程度标签（🔥热点、📈上升、🆕新增）
- 发布者完整信息（头像、实名、职务）
- 事件标题和AI总结的概要
- 轻互动数据（浏览、点赞、收藏）
- 相关标签展示
- **注意**：1.0版本不包含评论功能，只有轻互动

**发布者信息规范：**
- **业委会成员**：显示 "姓名 (业委会主任/副主任/委员)"
- **物业人员**：显示 "姓名 (物业经理/客服专员等)"
- **普通业主**：显示 "姓名 (业主)" 

- 头像支持默认头像或用户自定义头像

## 📐 布局规范

### 间距规范
- 组件间距：16px
- 内容边距：16px
- 卡片内边距：12px
- 文字行间距：1.5倍

### 颜色规范
- 主色调：#1890ff（蓝色）
- 成功色：#52c41a（绿色）
- 警告色：#faad14（橙色）
- 错误色：#f5222d（红色）
- 文字色：#262626（深灰）
- 辅助色：#8c8c8c（中灰）
- 背景色：#f5f5f5（浅灰）

### 字体规范
- 页面标题：18px，粗体
- 卡片标题：16px，粗体
- 正文内容：14px，常规
- 辅助信息：12px，常规

## 🔄 交互设计

### 页面加载
1. 显示骨架屏
2. 依次加载各个组件
3. 优先加载重要公示和事件列表

### 用户操作
1. **下拉刷新**：刷新页面数据
2. **上拉加载**：加载更多事件
3. **点击事件卡片**：跳转到事件详情页
4. **点击Tab标签**：切换全部、事件追踪、我订阅的
5. **点击筛选按钮**：弹出筛选菜单，支持多选事件类型
6. **点击排序按钮**：弹出排序选项，支持时间和热度排序
7. **点击搜索框**：跳转到搜索页
8. **点击消息通知**：跳转到消息页
9. **点击轻互动**：点赞、收藏等操作

### 状态管理
- 筛选状态：记住用户的筛选偏好
- 滚动位置：返回时恢复滚动位置
- 数据缓存：避免重复加载

## 🎨 视觉效果

### 动画效果
- 页面切换：滑动动画
- 卡片加载：淡入动画
- 筛选切换：平滑过渡
- 下拉刷新：弹性动画

### 反馈效果
- 点击反馈：轻微缩放
- 加载状态：骨架屏或加载指示器
- 错误状态：友好的错误提示
- 空状态：引导用户操作

## 📱 响应式设计

### 移动端 (< 768px)
- 单列布局
- 触摸友好的按钮尺寸
- 适配安全区域

### 平板端 (768px - 1024px)
- 考虑双列布局（可选）
- 优化横屏体验

### 桌面端 (> 1024px)
- 最大宽度限制
- 居中显示
- 鼠标悬停效果

## 🔧 技术实现要点

### 组件拆分
```
Home.tsx
├── TopNavigation.tsx (现有，优化)
├── ImportantNotices.tsx (现有，优化)
├── EventFilterTabs.tsx (新增)
├── FilterSortPanel.tsx (新增)
└── EventList.tsx (现有，优化)
    └── EventCard.tsx (现有，优化)
```

### 数据结构
```typescript
// 事件筛选Tab
interface EventTab {
  type: 'all' | 'tracking' | 'subscribed';
  label: string;
  count?: number;
}

// 事件类型筛选
interface EventTypeFilter {
  type: 'suggestion' | 'repair' | 'expense' | 'seal' | 'announcement' | 'notice' | 'info' | 'survey';
  label: string;
  selected: boolean;
}

// 排序选项
interface SortOption {
  type: 'time_asc' | 'time_desc' | 'hot';
  label: string;
}

// 重要公示数据
interface ImportantNotice {
  id: string;
  aiTitle: string;  // AI总结的标题
  aiSummary: string; // AI总结的概要
  publisher: Publisher; // 发布者完整信息
  publishTime: string;
  viewCount: number;
}

// 发布者信息
interface Publisher {
  id: string;
  name: string; // 发布者姓名
  role: 'committee_chair' | 'committee_vice_chair' | 'committee_member' | 'property_manager' | 'property_staff' | 'owner' | 'anonymous'; // 角色类型
  roleDisplay: string; // 角色显示名称，如 "业委会主任"、"物业经理"、"业主"等
  avatar?: string; // 头像URL，可选
  isAnonymous: boolean; // 是否匿名
  buildingInfo?: string; // 楼栋信息，如 "3栋2单元501室"，仅业主有
}

// 事件卡片数据
interface EventCard {
  id: string;
  title: string;
  aiSummary: string; // AI总结的概要
  publisher: Publisher; // 发布者完整信息
  publishTime: string;
  viewCount: number;
  likeCount: number;
  favoriteCount: number;
  tags: string[];
  hotLevel?: 'hot' | 'rising' | 'new';
}
```

### 性能优化
- 虚拟滚动（事件列表较长时）
- 图片懒加载
- 组件懒加载
- 数据缓存策略

---

*此设计文档将在开发过程中持续更新和完善*