# 参与页 线框图设计

## 📱 页面概述

参与页是小区成员（业主、业委会、物业）的首页，集中展示可用的流程功能、待办事项和事件管理入口。

### 🎯 设计目标
- 提供小区成员（业主、业委会、物业）专属的工作界面
- 清晰展示待办事项和优先级
- 简化流程创建和管理操作
- 整合原有的创建事件功能

## 🏗️ 页面结构

```
┌─────────────────────────────────────┐
│ 顶部导航栏 (TopNavigation)            │
├─────────────────────────────────────┤
│ 用户角色卡片                         │
├─────────────────────────────────────┤
│ 流程功能区                          │
│ ┌─────────┬─────────┬─────────┐     │
│ │ 支出申请 │ 用印申请 │ 公告通知 │     │
│ └─────────┴─────────┴─────────┘     │
│ ┌─────────┬─────────┬─────────┐     │
│ │ 征询意见 │ 信息发布 │ 事件管理 │     │
│ └─────────┴─────────┴─────────┘     │
├─────────────────────────────────────┤
│ 待办清单                            │
│ ┌─────────────────────────────────┐ │
│ │  停车棚改造用印申请                │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │  物业费调整征询意见                │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 最近活动                            │
├─────────────────────────────────────┤
│ 底部导航栏 (BottomNavigation)         │
└─────────────────────────────────────┘
```

## 🧩 组件详细设计

### 1. 顶部导航栏 (TopNavigation)
**复用现有组件**

```
┌─────────────────────────────────────┐
│ [返回] 阳光花园小区 - 参与             │
└─────────────────────────────────────┘
```

**功能说明：**
- 显示当前页面为"参与"
- 右侧帮助按钮，提供功能说明

### 2. 用户角色卡片
**新增组件设计（支持角色切换）**

```
┌─────────────────────────────────────┐
│ 👤 张三 - 业委会成员 [切换角色 ▼]     │
│ 📊 本月处理：12个流程 | 待办：3个     │
└─────────────────────────────────────┘
```

**功能说明：**
- 显示用户姓名和角色身份
- 展示本月工作统计数据
- **新增角色切换功能**：支持切换业委会、业主、物业三种角色
- 根据选择的角色动态显示对应的流程功能
- 点击可跳转到个人中心

**角色权限配置：**
- **业主角色**：小区建议、报事报修
- **业委会角色**：支出申请、用印申请、公告通知、信息发布、征询意见
- **物业角色**：通知发布

**技术实现：**
- 组件名：`UserRoleCard`
- 位置：`src/components/UserRoleCard.tsx`
- 状态管理：使用 useState 管理当前选择的角色
- 角色切换：下拉菜单选择不同角色

### 3. 流程功能区
**核心新增组件**

#### 3.1 功能网格布局

```
┌─────────────────────────────────────┐
│ 💰 支出申请    📋 用印申请    📢 公告通知 │
│ 申请资金支出    公章使用申请   发布重要公告 │
│                                   │
│ 🗳️ 征询意见    📝 信息发布    📊 事件管理 │
│ 收集业主意见    日常信息分享   记录社区事件 │
└─────────────────────────────────────┘
```

#### 3.2 各功能模块详细设计

**支出申请**
```
┌─────────────────┐
│ 💰 支出申请      │
└─────────────────┘
```
- 图标：💰 (金钱符号)
- 标题：支出申请
- 点击：跳转到支出申请表单页

**用印申请**
```
┌─────────────────┐
│ 📋 用印申请      │
└─────────────────┘
```
- 图标：📋 (文档符号)
- 标题：用印申请
- 点击：跳转到用印申请表单页

**公告通知**
```
┌─────────────────┐
│ 📢 公告通知      │
└─────────────────┘
```
- 图标：📢 (喇叭符号)
- 标题：公告通知
- 点击：跳转到公告发布表单页

**征询意见**
```
┌─────────────────┐
│ 🗳️ 征询意见      │
└─────────────────┘
```
- 图标：🗳️ (投票箱符号)
- 标题：征询意见
- 点击：跳转到征询意见表单页

**信息发布**
```
┌─────────────────┐
│ 📝 信息发布      │
└─────────────────┘
```
- 图标：📝 (编辑符号)
- 标题：信息发布
- 点击：跳转到信息发布表单页

**事件管理**
```
┌─────────────────┐
│ 📊 事件管理      │
└─────────────────┘
```
- 图标：📊 (图表符号)
- 标题：事件管理
- 点击：跳转到事件创建页面

**技术实现：**
- 组件名：`ProcessFunctionGrid`
- 位置：`src/components/ProcessFunctionGrid.tsx`
- 子组件：`ProcessFunctionCard`

### 4. 待办清单
**新增组件设计（全幅延展卡片）**

```
┌─────────────────────────────────────────────────────────────────┐
│ 📋 待办清单 (3)                                        [全部] │
├─────────────────────────────────────────────────────────────────┤
│ 停车棚改造用印申请                                               │
│ 申请人：李四 | 2小时前                                          │
│ [📄 详情]                                                      │
├─────────────────────────────────────────────────────────────────┤
│ 物业费调整征询意见                                               │
│ 发起人：王五 | 1天前                                            │
│ [📄 详情]                                                      │
├─────────────────────────────────────────────────────────────────┤
│ 小区绿化改造建议                                                 │
│ 建议人：赵六 | 3天前                                            │
│ [📄 详情]                                                      │
└─────────────────────────────────────────────────────────────────┘
```

**功能说明：**
- 显示待办事项数量
- 按时间排序（最新在前）
- 显示申请人、时间信息
- **全幅延展卡片设计**：占满容器宽度，提供更好的阅读体验
- **简化操作**：
  - 📄 详情按钮：查看完整信息并进行处理
  - 在详情页面内进行同意/拒绝操作
  - 拒绝操作必须填写理由说明

**操作交互：**
- 点击详情进入处理页面
- 处理页面包含完整信息展示
- 同意操作：一键确认
- 拒绝操作：必须填写拒绝理由（不少于10字）
- 操作后自动返回列表并刷新
- 显示操作结果提示

**技术实现：**
- 组件名：`TodoList`
- 位置：`src/components/TodoList.tsx`
- 子组件：`TodoItem`
- 快捷操作：`QuickActionButtons`

### 5. 最近操作
**新增组件设计**

```
┌─────────────────────────────────────┐
│ 🕒 最近活动                  [更多] │
├─────────────────────────────────────┤
│ 📝 您发布了"停车位分配方案"          │
│ 2小时前                            │
├─────────────────────────────────────┤
│ ✅ 您审批通过了"绿化维护费用申请"     │
│ 5小时前                            │
├─────────────────────────────────────┤
│ 💬 您参与了"电梯维修"事件讨论         │
│ 1天前                              │
└─────────────────────────────────────┘
```

**功能说明：**
- 显示用户最近的操作记录
- 包括发布、审批、参与等操作
- 时间显示相对时间
- 点击可跳转到相关详情页

**技术实现：**
- 组件名：`RecentActivity`
- 位置：`src/components/RecentActivity.tsx`

## 📐 布局规范

### 功能网格设计
- **网格布局**：3列2行，响应式调整
- **卡片尺寸**：等宽等高，保持视觉平衡
- **间距**：卡片间距12px，外边距16px
- **圆角**：8px圆角，保持现代感

### 全幅延展卡片设计
- **设计理念**：采用全幅延展的设计语言，提供更好的视觉体验
- **卡片宽度**：占满容器宽度（100%），去除左右边距
- **内容布局**：内容区域保持合理的内边距（16px）
- **视觉层次**：通过背景色和阴影区分不同层级的内容
- **适用组件**：待办清单、最近活动、用户角色卡片等主要内容区域

### 颜色规范
- **功能卡片背景**：白色 (#ffffff)
- **卡片边框**：浅灰 (#e8e8e8)
- **图标颜色**：主题蓝 (#1890ff)
- **标题颜色**：深灰 (#262626)
- **描述颜色**：中灰 (#8c8c8c)

### 字体规范
- **功能标题**：16px，粗体
- **功能描述**：14px，常规
- **副标题**：12px，常规
- **待办标题**：14px，粗体
- **待办信息**：12px，常规

## 🔄 交互设计

### 功能卡片交互
1. **点击效果**：轻微缩放 (scale: 0.98)
2. **悬停效果**：阴影加深
3. **加载状态**：显示加载指示器
4. **跳转动画**：页面滑动切换

### 待办清单交互
1. **下拉刷新**：刷新待办数据
2. **左滑操作**：快速标记已完成
3. **长按操作**：显示更多选项
4. **筛选功能**：按优先级筛选

### 状态管理
- **待办数量**：实时更新
- **功能权限**：根据角色显示
- **操作记录**：本地缓存

## 📱 响应式设计

### 移动端 (< 768px)
```
功能网格：3列2行
┌─────────┬─────────┬─────────┐
│ 支出申请 │ 用印申请 │ 公告通知 │
├─────────┼─────────┼─────────┤
│ 征询意见 │ 信息发布 │ 事件管理 │
└─────────┴─────────┴─────────┘
```

### 平板端 (768px - 1024px)
```
功能网格：3列2行
┌─────────┬─────────┬─────────┐
│ 支出申请 │ 用印申请 │ 公告通知 │
├─────────┼─────────┼─────────┤
│ 征询意见 │ 信息发布 │ 事件管理 │
└─────────┴─────────┴─────────┘
```

### 桌面端 (> 1024px)
- 保持3列2行布局
- 增加卡片间距
- 优化鼠标悬停效果

## 🎨 视觉效果

### 动画效果
- **页面进入**：从右侧滑入
- **卡片加载**：依次淡入
- **待办更新**：数字跳动动画
- **操作反馈**：按钮点击动画

### 状态指示
- **加载状态**：骨架屏
- **空状态**：友好的空状态插图
- **错误状态**：错误提示和重试按钮
- **成功状态**：操作成功提示

## 🔧 技术实现要点

### 组件拆分
```
Participate.tsx
├── TopNavigation.tsx (复用)
├── UserRoleCard.tsx (新增)
├── ProcessFunctionGrid.tsx (新增)
│   └── ProcessFunctionCard.tsx (新增)
├── TodoList.tsx (新增)
│   └── TodoItem.tsx (新增)
└── RecentActivity.tsx (新增)
```

### 数据结构
```typescript
// 流程功能配置
interface ProcessFunction {
  id: string;
  title: string;
  description: string;
  subtitle: string;
  icon: string;
  route: string;
  permission: string[];
}

// 待办事项
interface TodoItem {
  id: string;
  title: string;
  applicant: string;
  createTime: string;
  type: string;
  status: 'pending' | 'processing' | 'completed';
  rejectReason?: string; // 拒绝理由（可选）
}

// 最近活动
interface RecentActivity {
  id: string;
  action: string;
  target: string;
  time: string;
  type: 'publish' | 'approve' | 'participate';
}
```

### 静态数据模拟
```typescript
// 模拟待办数据
const mockTodoList: TodoItem[] = [
  {
    id: '1',
    title: '停车棚改造用印申请',
    applicant: '李四',
    createTime: '2024-01-15T10:00:00Z',
    type: 'seal_application',
    status: 'pending'
  },
  {
    id: '2',
    title: '物业费调整征询意见',
    applicant: '王五',
    createTime: '2024-01-14T14:30:00Z',
    type: 'opinion_survey',
    status: 'pending'
  },
  // ... 更多数据
];
```

### 性能优化
- **懒加载**：非关键组件延迟加载
- **缓存策略**：待办数据本地缓存
- **防抖处理**：搜索和筛选操作
- **虚拟滚动**：大量待办事项时使用

---

*此设计文档将在开发过程中持续更新和完善*