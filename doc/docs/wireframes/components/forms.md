# 表单组件设计规范

## 📝 组件概述

表单组件是用户输入和提交数据的核心界面元素，包括各种流程创建表单、编辑表单和搜索表单等。

### 🎯 设计目标
- 提供直观易用的数据输入体验
- 保持一致的表单样式和交互
- 支持富文本编辑和文件上传
- 实现有效的表单验证和错误提示

## 🧩 表单类型设计

### 1. 事件创建表单 (EventCreateForm)

#### 1.1 表单结构
```
┌─────────────────────────────────────┐
│ 📝 创建新事件                       │
├─────────────────────────────────────┤
│ 事件描述 *                          │
│ ┌─────────────────────────────────┐ │
│ │ [富文本编辑器]                  │ │
│ │ B I U 🔗 📷 📋                 │ │
│ │                                 │ │
│ │ 请详细描述事件内容...           │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤               
│ 发生时间: [2024-01-15 ▼]             │
├─────────────────────────────────────┤
│ 标签                                │
│ [🏗️ 基础设施] [💰 费用相关] [+ 添加] │
├─────────────────────────────────────┤
│ 附件                                │
│ ┌─────────────────────────────────┐ │
│ │ 📎 拖拽文件到此处或点击上传     │ │
│ │ 支持图片、PDF、Word等格式       │ │
│ │ 单个文件不超过10MB              │ │
│ └─────────────────────────────────┘ │
│ 📄 设计图纸.pdf (2.3MB) [删除]     │
│ 🖼️ 现场照片.jpg (1.8MB) [删除]     │
├─────────────────────────────────────┤
│ 关联流程                             │
│ [选择流程...]                        │
├─────────────────────────────────────┤
│ [取消]                    [创建事件]  │
└─────────────────────────────────────┘
```

#### 1.2 字段设计

**必填字段**
- 事件标题：单行文本，最多50字符
- 事件类型：下拉选择，预设类型
- 事件描述：富文本编辑器，支持格式化

**可选字段**
- 预计时间：日期时间选择器
- 影响范围：多选框 + 级联选择
- 标签：标签选择器，支持自定义
- 附件：文件上传组件
- 优先级：单选按钮组
- 投票设置：开关 + 相关配置

#### 1.3 技术实现
```typescript
interface EventCreateFormData {
  title: string;
  type: 'maintenance' | 'voting' | 'announcement' | 'complaint';
  description: string;
  startDate?: Date;
  endDate?: Date;
  scope: {
    type: 'all' | 'buildings' | 'units';
    targets?: string[];
  };
  tags: string[];
  attachments: File[];
  priority: 'low' | 'medium' | 'high' | 'urgent';
  requiresVoting: boolean;
  votingConfig?: {
    deadline: Date;
    options: string[];
  };
}
```

### 2. 信息发布表单 (InfoPublishForm)

#### 2.1 表单结构
```
┌─────────────────────────────────────┐
│ 📢 发布信息                         │
├─────────────────────────────────────┤
│ 信息标题 *                          │
│ [输入信息标题...]                   │
├─────────────────────────────────────┤
│ 信息内容 *                          │
│ ┌─────────────────────────────────┐ │
│ │ [富文本编辑器]                  │ │
│ │ B I U 🔗 📷 📋 🎨              │ │
│ │ ✨ AI辅助写作                   │ │
│ │                                 │ │
│ │ 请输入要发布的信息内容...       │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 发布时间                            │
│ ● 立即发布  ○ 定时发布             │
│ [2024-01-15 09:00 ▼]               │
├─────────────────────────────────────┤
│ 发布范围                            │
│ ☑️ 全小区  ☐ 指定楼栋  ☐ 指定群组   │
├─────────────────────────────────────┤
│ 信息标签                            │
│ [📢 通知公告] [🎉 活动信息] [+ 添加] │
├─────────────────────────────────────┤
│ 附件资料                            │
│ ┌─────────────────────────────────┐ │
│ │ 📎 上传相关文件或图片           │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 重要程度                            │
│ ○ 普通  ● 重要  ○ 紧急             │
├─────────────────────────────────────┤
│ [保存草稿]                [立即发布] │
└─────────────────────────────────────┘
```

#### 2.2 AI辅助功能
```
┌─────────────────────────────────────┐
│ ✨ AI写作助手                       │
├─────────────────────────────────────┤
│ 请描述您要发布的信息要点:           │
│ [例如：春节期间垃圾清运时间调整]    │
├─────────────────────────────────────┤
│ 信息类型:                           │
│ ● 通知公告  ○ 活动信息  ○ 温馨提示 │
├─────────────────────────────────────┤
│ 语言风格:                           │
│ ● 正式  ○ 亲切  ○ 简洁             │
├─────────────────────────────────────┤
│ [生成内容]                [取消]    │
└─────────────────────────────────────┘
```

### 3. 投诉建议表单 (ComplaintForm)

#### 3.1 表单结构
```
┌─────────────────────────────────────┐
│ 💬 投诉建议                         │
├─────────────────────────────────────┤
│ 问题类型 *                          │
│ [选择类型 ▼] [噪音扰民] [设施损坏]  │
├─────────────────────────────────────┤
│ 问题标题 *                          │
│ [简要描述问题...]                   │
├─────────────────────────────────────┤
│ 详细描述 *                          │
│ ┌─────────────────────────────────┐ │
│ │ 请详细描述遇到的问题:           │ │
│ │ • 发生时间                      │ │
│ │ • 具体位置                      │ │
│ │ • 问题详情                      │ │
│ │ • 影响程度                      │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 发生位置                            │
│ 楼栋: [选择楼栋 ▼]                 │
│ 单元: [选择单元 ▼]                 │
│ 具体位置: [如：电梯、楼道、地下室]  │
├─────────────────────────────────────┤
│ 发生时间                            │
│ [2024-01-15 14:30 ▼]               │
├─────────────────────────────────────┤
│ 紧急程度                            │
│ ○ 一般  ● 较急  ○ 紧急  ○ 特急    │
├─────────────────────────────────────┤
│ 现场照片                            │
│ ┌─────────────────────────────────┐ │
│ │ 📷 上传现场照片 (最多9张)       │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 联系方式                            │
│ 手机号: [138****8888]              │
│ 微信号: [选填]                      │
│ ☑️ 允许物业联系我                   │
├─────────────────────────────────────┤
│ 期望处理方式                        │
│ ☐ 尽快维修  ☐ 协调沟通  ☐ 其他     │
│ [其他说明...]                       │
├─────────────────────────────────────┤
│ [取消]                    [提交投诉] │
└─────────────────────────────────────┘
```

### 4. 搜索表单 (SearchForm)

#### 4.1 基础搜索
```
┌─────────────────────────────────────┐
│ 🔍 [搜索事件、公告...] [搜索] [筛选] │
└─────────────────────────────────────┘
```

#### 4.2 高级筛选
```
┌─────────────────────────────────────┐
│ 🔽 高级筛选                         │
├─────────────────────────────────────┤
│ 内容类型                            │
│ ☑️ 事件  ☑️ 公告  ☐ 投票  ☐ 投诉   │
├─────────────────────────────────────┤
│ 时间范围                            │
│ 从: [2024-01-01 ▼]                 │
│ 到: [2024-01-31 ▼]                 │
├─────────────────────────────────────┤
│ 状态筛选                            │
│ ☐ 进行中  ☐ 已完成  ☐ 已取消       │
├─────────────────────────────────────┤
│ 标签筛选                            │
│ [🏗️ 基础设施] [💰 费用] [🚗 停车]   │
├─────────────────────────────────────┤
│ 影响范围                            │
│ ☐ 全小区  ☐ 我的楼栋  ☐ 我的单元   │
├─────────────────────────────────────┤
│ [重置]                    [应用筛选] │
└─────────────────────────────────────┘
```

## 📐 表单组件规范

### 1. 输入框组件 (Input)

#### 基础样式
```
┌─────────────────────────────────────┐
│ 字段标题 *                          │
│ ┌─────────────────────────────────┐ │
│ │ 请输入内容...                   │ │
│ └─────────────────────────────────┘ │
│ 提示文字或错误信息                  │
└─────────────────────────────────────┘
```

#### 状态设计
- **默认状态**：边框 #d9d9d9，背景 #ffffff
- **聚焦状态**：边框 #1890ff，阴影效果
- **错误状态**：边框 #ff4d4f，错误文字红色
- **停用状态**：背景 #f5f5f5，文字 #bfbfbf

### 2. 选择器组件 (Select)

#### 下拉选择器
```
┌─────────────────────────────────────┐
│ [选择选项 ▼]                        │
└─────────────────────────────────────┘

展开状态:
┌─────────────────────────────────────┐
│ [选择选项 ▲]                        │
├─────────────────────────────────────┤
│ ✓ 选项一                            │
│   选项二                            │
│   选项三                            │
└─────────────────────────────────────┘
```

#### 多选标签
```
┌─────────────────────────────────────┐
│ [标签一 ×] [标签二 ×] [+ 添加标签]  │
└─────────────────────────────────────┘
```

### 3. 日期时间选择器 (DatePicker)

```
┌─────────────────────────────────────┐
│ [2024-01-15 14:30] [📅]             │
└─────────────────────────────────────┘

展开状态:
┌─────────────────────────────────────┐
│ 2024年1月                    [< >]  │
├─────────────────────────────────────┤
│ 日 一 二 三 四 五 六                │
│     1  2  3  4  5  6                │
│  7  8  9 10 11 12 13                │
│ 14[15]16 17 18 19 20                │
│ 21 22 23 24 25 26 27                │
│ 28 29 30 31                         │
├─────────────────────────────────────┤
│ 时间: [14] : [30]                   │
├─────────────────────────────────────┤
│ [取消]                    [确定]    │
└─────────────────────────────────────┘
```

### 4. 富文本编辑器 (RichTextEditor)

```
┌─────────────────────────────────────┐
│ B I U S 🔗 📷 📋 🎨 ✨             │
├─────────────────────────────────────┤
│                                     │
│ 请输入内容...                       │
│                                     │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

#### 工具栏功能
- **B**: 粗体
- **I**: 斜体
- **U**: 下划线
- **S**: 删除线
- **🔗**: 插入链接
- **📷**: 插入图片
- **📋**: 插入表格
- **🎨**: 文字颜色
- **✨**: AI辅助写作

### 5. 文件上传组件 (FileUpload)

#### 拖拽上传区域
```
┌─────────────────────────────────────┐
│                                     │
│         📎                          │
│    拖拽文件到此处或点击上传         │
│                                     │
│   支持图片、PDF、Word等格式         │
│     单个文件不超过10MB              │
│                                     │
└─────────────────────────────────────┘
```

#### 文件列表
```
┌─────────────────────────────────────┐
│ 📄 设计图纸.pdf (2.3MB)    [删除]  │
│ 🖼️ 现场照片.jpg (1.8MB)    [删除]  │
│ 📊 预算表.xlsx (856KB)     [删除]  │
└─────────────────────────────────────┘
```

## 🔧 表单验证

### 验证规则
```typescript
interface ValidationRule {
  required?: boolean;
  minLength?: number;
  maxLength?: number;
  pattern?: RegExp;
  custom?: (value: any) => boolean | string;
}

// 常用验证规则
const validationRules = {
  title: {
    required: true,
    minLength: 2,
    maxLength: 50
  },
  phone: {
    pattern: /^1[3-9]\d{9}$/,
    message: '请输入正确的手机号码'
  },
  email: {
    pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
    message: '请输入正确的邮箱地址'
  }
};
```

### 错误提示
- **实时验证**：输入时即时显示错误
- **提交验证**：提交时统一验证并定位到错误字段
- **错误样式**：红色边框 + 错误文字
- **成功样式**：绿色边框 + 成功图标

## 🎨 视觉设计

### 颜色规范
- **主色调**：#1890ff (蓝色)
- **成功色**：#52c41a (绿色)
- **警告色**：#faad14 (橙色)
- **错误色**：#ff4d4f (红色)
- **文字色**：#262626 (深灰)
- **辅助色**：#8c8c8c (中灰)
- **边框色**：#d9d9d9 (浅灰)
- **背景色**：#fafafa (极浅灰)

### 字体规范
- **标题字体**：16px，粗体
- **标签字体**：14px，常规
- **输入字体**：14px，常规
- **提示字体**：12px，常规
- **错误字体**：12px，红色

### 间距规范
- **表单项间距**：16px
- **标签与输入框间距**：8px
- **按钮间距**：12px
- **内边距**：12px
- **外边距**：16px

## 📱 响应式设计

### 移动端优化
- **输入框高度**：44px (符合触摸标准)
- **按钮高度**：44px
- **字体大小**：最小16px (避免缩放)
- **间距调整**：适当增加触摸区域

### 平板端适配
- **多列布局**：利用更大的屏幕空间
- **侧边栏表单**：复杂表单使用侧边栏
- **浮动标签**：节省垂直空间

### 桌面端增强
- **键盘导航**：Tab键切换焦点
- **快捷键支持**：Ctrl+S保存等
- **鼠标悬停效果**：提供视觉反馈
- **拖拽功能**：文件拖拽上传

## 🔄 交互设计

### 表单流程
1. **进入表单**：清晰的表单标题和说明
2. **填写过程**：实时验证和提示
3. **保存草稿**：支持临时保存
4. **提交确认**：二次确认重要操作
5. **结果反馈**：成功/失败状态提示

### 动画效果
- **字段聚焦**：边框颜色渐变
- **错误提示**：抖动动画
- **成功提交**：勾选动画
- **加载状态**：进度指示器

### 用户体验
- **自动保存**：定时保存用户输入
- **智能填充**：基于历史数据预填充
- **快捷操作**：常用选项快速选择
- **撤销重做**：支持操作撤销

---

*此设计文档将在开发过程中持续更新和完善*